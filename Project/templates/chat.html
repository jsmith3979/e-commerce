<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Page</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<div class="header">
    <div class="container">
        <nav>
            <ul>
                <li><a href="/dashboard">Home</a></li>
                <li><a href="#">Reviews</a></li>
                <li><a href="/Create_listing">Create listing</a></li>
                <li><a href="/chat_inbox">Messages</a></li>
                <li><a href="/my_listings">My listings</a></li>

            </ul>
        </nav>
        <div class="search-bar">
            <form action="{{ url_for('search') }}" method="GET">
                <input type="text" name="query" placeholder="Search for items..." value="{{ query if query else '' }}" required>
                <button type="submit">Search</button>
            </form>
        </div>
        <nav>
            <ul>
                <li><a href="/logout">Logout</a></li>
            </ul>
        </nav>
        <div class="notification-container">
            <a href="{{ url_for('notifications_page') }}">
                <svg class="notification-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M12 2C10.346 2 9 3.346 9 5v1.07C6.159 7.16 4 9.94 4 13v4l-2 2v1h20v-1l-2-2v-4c0-3.06-2.159-5.84-5-6.93V5c0-1.654-1.346-3-3-3zm1 18h-2v-2h2v2zm6-4H5v-1c0-2.757 2.243-5 5-5h6c2.757 0 5 2.243 5 5v1z"/>
                </svg>
                <span class="notification-badge"></span>
            </a>
        </div>

        <div class="basket-container">
            <a href="{{ url_for('basket_page') }}">
                <svg xmlns="http://www.w3.org/2000/svg" class="basket-icon" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1
                    0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zM7.16
                    14l.84-2h8.6c.75 0 1.41-.41 1.75-1.03l3.58-6.49-.94-.33L17.25
                    10H8.53l-1.1-2H1v2h4l3.6 7.59-1.35 2.44C6.52 19.37 7.48
                    21 9 21h12v-2H9.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75
                    0 1.41-.41 1.75-1.03L23 6H6.42l-.94-2H1V2h4.42l3.6 7.59L7.16 14z"/>
                </svg>
            </a>
        </div>

        <div class="logo"><h2>E</h2><h1>BUY</h1></div>
    </div>
<div class="inspect_item_column">
  <div class="inspect_Product">
    <div>
      <h1>{{ item.name }}</h1>
      <img src="{{ url_for('item_image', item_id=item.item_id) }}" alt="{{ item.name }} Image" width="300" height="300">
      <p><strong>Description:</strong> {{ item.description }}</p>
      <p><strong>Price:</strong> ${{ item.price }}</p>
      <p><strong>Category:</strong> {{ item.category }}</p>
    </div>
  </div>
</div>



<!-- Display Messages -->
<div id="chatbox">
    <h3>Chat with {{ chat_partner_name }}</h3>
<div id="chat-box">
  {% for message in messages %}
    <div class="message">
      <strong>
        {% if message[0] == session['user_id'] %}
          You
        {% else %}
          {{ message[1] }}
        {% endif %}
      </strong>:
      <p>{{ message[2] }}</p>
      <small>{{ message[3] }}</small>
    </div>
  {% endfor %}
</div>

<!-- Message Sending Form -->
<form action="{{ url_for('send_message') }}" method="POST">
  <input type="hidden" name="receiver_id" value="{{ user_id }}">
  <input type="hidden" name="item_id" value="{{ item_id }}">
  <textarea name="message" placeholder="Type your message..." required></textarea>
  <button type="submit">Send</button>
</form>
</div>